<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/assets/global.css" />
        <link id="themeCSSLink" rel="stylesheet" href="/assets/dark.css" media="(prefers-color-scheme: dark)" />
        <link rel="stylesheet" href="/assets/highlight.css" />
        <script src="https://cdn.jsdelivr.net/gh/swiftysites/theme-switch@release/src/theme-switch.min.js"></script>
        <script src="/assets/highlight.js"></script>
        <script>hljs.highlightAll();</script>
        <title>SwiftySites | Supporting Markdown</title>
    </head>
    <body>
        <header>
            <nav>
    <ul>
        <li><a href="/">Home</a></li><li><a href="/cmark-gfm">CMark-GFM</a></li><li><a href="/posts">Archive</a></li><li><a href="/tags">Topics</a></li>
    </ul>
</nav>
            <theme-switch stylesheet-id="themeCSSLink" color="rgb(3, 102, 214)" color-dark="rgb(88, 166, 255)"></theme-switch>
        </header>
        <main>
    <article>
    <header>
        <h1><a href="/posts/supporting-markdown">Supporting Markdown</a></h1>
        <div>dl on 4 Sep 2021</div>
    </header>
    <main>
    <p>One of the first challenges one encounters when building a static site generator is Markdown support.</p>
<p>I knew Apple had just <a href="https://developer.apple.com/videos/play/wwdc2021/10109/?time=486">announced</a> during WWDC21 support for Markdown in attributed strings and other APIs but offered no interface for directly converting Markdown to HTML.</p>
<p>A bit of digging in the developer forums led me to <a href="https://developer.apple.com/forums/thread/682711">this answer</a> by an Apple engineer. Now I knew for a fact that internally they were using the fantastic <a href="https://github.com/github/cmark-gfm">cmark-gfm</a> library.</p>
<p><code>cmark-gfm</code> itself is a fork of the <a href="https://github.com/commonmark/cmark">cmark</a> C library. GFM stands for <a href="https://github.github.com/gfm/">GitHub Flavor Markdown</a> and consists of a set of extensions to the <a href="https://commonmark.org">CommonMark</a> specification.</p>
<p>Having some experience in integrating C code into Swift applications I started adapting <code>cmark-gfm</code> for my purposes. The endeavour involved cross-compiling for the relevant architectures and linking to a custom Objective-C framework.</p>
<p>Since <code>cmark-gfm</code> lacked a simplified interface for straightforwardly converting GFM to HTML – which the original <code>cmark</code> had – I decided to write my own Swift protocol around it. I decided to expose all the options and extensions available from the underlying libraries.</p>
<p>While the whole effort was <a href="https://github.com/swiftysites/cmark-gfm">open-source</a> I decided to publish the final result as a binary XCFramework. This makes it really easy to include – via Swift Package Manager (SPM) – in SwiftySites or any other project that needs it without the hassle of having to build everything from C sources.</p>

    </main>
</article>
</main>
        <footer>
            <span>Made with  and <a href="https://github.com/swiftysites/swiftysites">SwiftySites</a>.</span>
        </footer>
    </body>
</html>